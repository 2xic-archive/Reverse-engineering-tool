<!DOCTYPE html>
<html lang="en">
	<head>
		<title>reversing</title>
		<meta charset="utf-8"/>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>

		<script src="interface/actions.js"></script>
		<script src="interface/build_register_table.js"></script>
		<script src="interface/highlighter.js"></script>
		<script src="interface/search.js"></script>
		<script src="flat-view/flat-view.js"></script>
		<script src="grapth-view/grapth.js"></script>
		<script src="grapth-view/grapth-view.js"></script>
		<script src="hex-view/hex-view.js"></script>

		<link rel="stylesheet" type="text/css" href="css/menubar.css">
		<link rel="stylesheet" type="text/css" href="css/flat-view.css">
		<link rel="stylesheet" type="text/css" href="css/index.css">
		<link rel="stylesheet" type="text/css" href="css/grapth-view.css">
		<link rel="stylesheet" type="text/css" href="css/section-serach.css">
	</head>

	<body>

		<!--
			menu
		!-->
		<div id="container_split">
			<div id="menu">
				<div>
					<ul>
						<li><button disabled="">&larr;</button></li>
						<li><button disabled>&rarr;</button></li>
						<li><button onclick="open_close_search()" onfocusout="check_focus()">Search</button></li>
						<li><button onclick="save_project()">Save</button></li>
						<li><button onclick="hide_hex()">Hide hex view</button></li>
						<li><button onclick="hide_grapth()">Hide grapth view</button></li>
					</ul>
					<div id="search_content" class="search_box" tabindex="2">
						<input type="text" autocomplete="off" placeholder="Search.." id="search" onkeyup="filter_search()">
<!--						<a href="#about">About</a>
						<a href="#base">Base</a>
						<a href="#blog">Blog</a>
						<a href="#contact">Contact</a>
						<a href="#custom">Custom</a>
						<a href="#support">Support</a>
						<a href="#tools">Tools</a>
!-->
					</div>
				</div>
			</div>

			<div id="menu">
				<!--
					maybe add a image of the binary structure or something...
				!-->
			</div>

			<div id="container">
				<div id="container_row">
					<div id="container_item_normal">
						<!--    flat-view   !-->
						<table id="flat_view_table">
							<tr id="table_header">
								<th>section</th>
								<th>address</th>
								<th>code</th>
								<th>comment</th>
							</tr>
						</table>
					</div>
					<div id="hex_view" class="container_item_small">
						<div id="container_50">
							<div id="container_small">
								<table id="hex_table">
								</table>
							</div>
							<div id="container_small">
								<table id="char_table">
										
								</table>
							</div>
						</div>
					</div>
				</div>

				<!--    Grapth-view !-->        
				<div id="container_row">
				
					<div id="container_item_normal" name="grapth-div">
						<div id="grapth" >
							<canvas id="canvas">
								<!--    will be drawn   !-->
							</canvas>
						</div>
					</div>

					<div class="container_item_small">
						<table id="registers">


						</table>
					</div>
				</div>
			</div>
		</div>


		<script type="text/javascript">

			var socket = io.connect('http://' + document.domain + ':' + location.port);
			
			socket.on( 'connect', function() {
				socket.emit( 'online', {
				data: 'User Connected'
				})
			});

			socket.emit('get control', {data:""});
		
			/*
			socket.on('error', function(msg){
				if(msg.indexOf("xhr") == -1){
					alert(msg);
				}
			});*/

			socket.emit( 'hex', {
				data: 'User Connected'
			});

			socket.on('hex_response', function(msg){
				create_hex_view(msg["data"]);

		//      create_hex_view(msg["data"]);
			});

			socket.on('control', function(msg){
				create_blocks(msg);
				create_grapth(msg, 0);
			});

			socket.on('code_with_comments', function( msg ) {
				code_comments = msg["comments"];
				code_sections = msg["sections"];

				for (var key in msg["code"]) {
					var location = Object.keys(msg["code"][key][1])[0];
					block_list[location] = msg["code"][key][0];
				}
				create_flat_view(msg["code"]);
			});


		</script>
	</body>
	

</html>
