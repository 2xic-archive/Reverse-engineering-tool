<!DOCTYPE html>
<html lang="en">
	<head>
		<title>reversing</title>
		<meta charset="utf-8"/>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>

		<script src="interface/backward_forward.js"></script>
		<script src="interface/highlighter.js"></script>
		<script src="interface/actions.js"></script>
		<script src="interface/search.js"></script>

		<script src="dynamic-view/dynamic-view.js"></script>
		<script src="flat-view/flat-view.js"></script>
		<script src="grapth-view/grapth.js"></script>
		<script src="grapth-view/grapth-view.js"></script>
		<script src="hex-view/hex-view.js"></script>

		<link rel="stylesheet" type="text/css" href="css/menubar.css">
		<link rel="stylesheet" type="text/css" href="css/flat-view.css">
		<link rel="stylesheet" type="text/css" href="css/index.css">
		<link rel="stylesheet" type="text/css" href="css/grapth-view.css">
		<link rel="stylesheet" type="text/css" href="css/section-serach.css">
	</head>

	<body>
		<!--
			menu
		!-->
		<div id="container_split">
			<div id="menu">
				<div>
					<ul>
						<li><button id="backward" disabled="">&larr;</button></li>
						<li><button id="forward" disabled>&rarr;</button></li>
						<li><button onclick="open_close_search()">Sections</button></li>
						<li><button disabled onclick="save_project()">Save</button></li>
						<li><button id="hex_hide" onclick="hide_hex()">#</button></li>
						<li><button id="grapth_hide" onclick="hide_grapth()">&#8258;</button></li>
					</ul>
					<div id="search_content" class="search_box" tabindex="2">
						<input type="text" autocomplete="off" placeholder="Search.." id="search" onkeyup="filter_search()">
					</div>
				</div>
			</div>

			<div id="menu">
				<!--
					maybe add a image of the binary structure or something...
				!-->
			</div>

			<div id="container">
				<div id="container_row">
					<div id="container_item_70" name="flat-view-div">
						<!--    flat-view   !-->
						<table id="flat_view_table">
							<tr id="table_header">
								<th>section</th>
								<th>address</th>
								<th>code</th>
								<th>comment</th>
							</tr>
						</table>
					</div>
					<div name="hex_view" id="container_item_30">
						<div id="container_item_50">
							<div id="container_full">
								<table id="hex_table">
								</table>
							</div>
							<div id="container_full">
								<table id="char_table">
										
								</table>
							</div>
						</div>
					</div>
				</div>

				<!--    Grapth-view !-->        
				<div id="container_row">
					<div id="container_item_70" name="grapth-div">
						<div id="grapth" >
							<canvas id="canvas">
								<!--    will be drawn   !-->
							</canvas>
						</div>
					</div>
					<div id="container_item_30" name="dynamic-div">
						<center>
							<h1>Unicorn data here</h1>						
						</center>
					</div>
				</div>
			</div>
		</div>


		<script type="text/javascript">
			var socket = io.connect('http://' + document.domain + ':' + location.port);
			
			socket.on('connect', function() {
				socket.emit('online')
			});

			socket.on('error', function(msg){
				if(msg.indexOf("xhr") == -1){
					alert(msg);
				}
			});

			socket.on('dynamic_data', function(msg){
				create_dynamic_view(msg);
			});

			socket.on('block', function(msg){
				code_sections = msg["sections"];

				create_flat_view(msg["code"]);
				create_blocks(msg["grapth"]);
				if(last_message == undefined){
					create_grapth(msg["grapth"], 0, false);
				}else{
					create_grapth(msg["grapth"], 0, true);
				}
			});

			socket.on('hex_response', function(msg){
				if(msg != null && msg["data"] != null){
					create_hex_view(msg["data"]);
				}
			});
		</script>
	</body>
</html>
